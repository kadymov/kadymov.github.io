# SSR/SSG и React Server Components (TTS)

Вопрос касается современных подходов к рендерингу React-приложений на стороне сервера, включая Server-Side Rendering, Static Site Generation и новые React Server Components.

Server-Side Rendering (SSR):

SSR - это процесс рендеринга React-компонентов на сервере и отправки готового HTML клиенту.

Преимущества SSR включают быстрое время до первой отрисовки, лучшее SEO поскольку поисковики индексируют готовый HTML, улучшенную производительность на медленных устройствах, и возможность для социальных сетей парсить метатеги.

Недостатки SSR включают увеличенную нагрузку на сервер, сложность кеширования, время до интерактивности может быть больше, и проблемы с гидратацией.

Static Site Generation (SSG):

SSG - это генерация статических HTML файлов во время сборки.

Преимущества SSG включают максимальную производительность, отличное SEO, простое развертывание через CDN, и высокую надежность.

Недостатки SSG включают то что подход не подходит для динамического контента, время сборки увеличивается с количеством страниц, и нужна пересборка для обновления контента.

React Server Components (RSC):

RSC - это новая парадигма, где компоненты выполняются исключительно на сервере и отправляют сериализованный результат клиенту.

Ключевые особенности RSC: компоненты выполняются только на сервере, имеют прямой доступ к серверным ресурсам, не включаются в клиентский бандл, и могут использовать async/await напрямую.

Server Components выполняются на сервере и имеют прямой доступ к базе данных и другим серверным ресурсам. Client Components отмечаются директивой 'use client' и обеспечивают интерактивность.

Сравнение подходов:

По производительности: SSR обеспечивает среднюю производительность, SSG - высокую, RSC - высокую.

По SEO: все три подхода обеспечивают отличное SEO.

По поддержке динамического контента: SSR поддерживает полностью, SSG ограниченно, RSC поддерживает полностью.

По размеру бандла: SSR и SSG создают большой бандл, RSC - меньше.

По сложности: SSG имеет низкую сложность, SSR - среднюю, RSC - высокую.

По доступу к серверу: SSR и SSG имеют ограниченный доступ, RSC - прямой.

Стратегии гидратации:

Проблемы гидратации включают несоответствие серверного и клиентского HTML, блокирующую гидратацию, и пропуск интерактивности.

Решения включают динамическую загрузку компонентов для избежания проблем гидратации и использование Suspense для потоковой гидратации.

Оптимизация производительности:

React 18 предоставляет автоматическую селективную гидратацию. Потоковый SSR позволяет отправлять HTML частями по мере готовности компонентов.

Best Practices:

Выбирайте подходящую стратегию: SSG для статического контента, SSR для динамического контента, RSC для серверо-зависимой логики.

Оптимизируйте размер бандла через правильное разделение на Server и Client компоненты.

Управляйте состоянием через Server Actions для мутаций данных.

Рекомендации для собеседования:

Senior-level ожидания включают понимание различий между SSR, SSG и RSC, знание проблем гидратации и способов их решения, опыт работы с Next.js или аналогичными фреймворками, понимание влияния на производительность и SEO, знание особенностей React 18.

Частые подводные камни включают неправильное использование useEffect в SSR, проблемы с гидратацией из-за динамических данных, неоптимальное разделение на Server/Client компоненты, и игнорирование водопадов запросов в RSC.

Связанные темы: Event Loop для понимания асинхронности, Concurrent Rendering для React 18 особенностей, Performance Optimization для оптимизации производительности.
